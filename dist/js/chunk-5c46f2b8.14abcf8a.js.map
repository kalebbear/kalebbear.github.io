{"version":3,"sources":["webpack:///./src/views/admin/Brands.vue","webpack:///src/views/admin/Brands.vue","webpack:///./src/views/admin/Brands.vue?b15d","webpack:///./src/views/admin/Brands.vue?421d","webpack:///./src/views/admin/Brands.vue?0c1f"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","model","value","searchQuery","callback","$$v","expression","on","searchBrands","showAddBrandDialog","staticStyle","brands","scopedSlots","_u","key","fn","scope","row","logo","handleImageError","_e","$event","editBrand","confirmDeleteBrand","currentPage","pageSize","totalBrands","handlePageChange","addBrandDialogVisible","ref","newBrand","rules","name","$set","description","uploadUrl","beforeUploadLogo","handleLogoUploadSuccess","slot","submitForm","editBrandDialogVisible","currentBrand","submitEditForm","deleteBrandDialogVisible","deleteBrand","imageDialogVisible","currentImage","staticRenderFns","data","brandToDelete","required","message","trigger","mounted","fetchBrands","methods","response","getBrandsPaged","code","length","$message","error","searchBrandsByName","page","addBrand","success","brand","formName","$refs","validate","valid","updateBrand","deleteBrandById","id","logoUrl","baseUrl","file","formData","FormData","append","window","localStorage","getItem","uploadFile","status","showImageDialog","imageUrl","component"],"mappings":"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","file":"js/chunk-5c46f2b8.14abcf8a.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"brands-container\"},[_c('el-card',{staticClass:\"card\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"【商品品牌管理】\")]),_c('div',{staticClass:\"center\"},[_c('div',{staticClass:\"search-bar\"},[_c('el-input',{staticClass:\"search-input\",attrs:{\"placeholder\":\"请输入品牌名称\",\"clearable\":\"\"},model:{value:(_vm.searchQuery),callback:function ($$v) {_vm.searchQuery=$$v},expression:\"searchQuery\"}}),_c('el-button',{staticClass:\"search-button\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.searchBrands}},[_vm._v(\"搜索\")]),_c('el-button',{staticClass:\"search-button\",attrs:{\"type\":\"success\"},on:{\"click\":_vm.showAddBrandDialog}},[_vm._v(\"新增品牌\")])],1),_c('el-table',{staticClass:\"brand-table\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.brands,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"sortable\":\"\",\"label\":\"品牌名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"description\",\"sortable\":\"\",\"label\":\"品牌描述\"}}),_c('el-table-column',{attrs:{\"label\":\"品牌Logo\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.logo)?_c('el-image',{staticStyle:{\"width\":\"80px\",\"height\":\"80px\"},attrs:{\"src\":scope.row.logo,\"preview-src-list\":[scope.row.logo]},on:{\"error\":_vm.handleImageError}}):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"160\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.editBrand(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.confirmDeleteBrand(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-pagination',{staticClass:\"pagination\",attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"layout\":\"total, prev, pager, next\",\"total\":_vm.totalBrands},on:{\"current-change\":_vm.handlePageChange}})],1)]),_c('el-dialog',{attrs:{\"title\":\"新增品牌\",\"visible\":_vm.addBrandDialogVisible},on:{\"update:visible\":function($event){_vm.addBrandDialogVisible=$event}}},[_c('el-form',{ref:\"newBrandForm\",attrs:{\"model\":_vm.newBrand,\"rules\":_vm.rules,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"label\":\"品牌名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.newBrand.name),callback:function ($$v) {_vm.$set(_vm.newBrand, \"name\", $$v)},expression:\"newBrand.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"品牌描述\",\"prop\":\"description\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.newBrand.description),callback:function ($$v) {_vm.$set(_vm.newBrand, \"description\", $$v)},expression:\"newBrand.description\"}})],1),_c('el-form-item',{attrs:{\"label\":\"品牌Logo\",\"prop\":\"logo\"}},[_c('el-input',{model:{value:(_vm.newBrand.logo),callback:function ($$v) {_vm.$set(_vm.newBrand, \"logo\", $$v)},expression:\"newBrand.logo\"}}),_c('el-upload',{ref:\"uploadLogo\",staticClass:\"upload-demo\",attrs:{\"action\":_vm.uploadUrl,\"before-upload\":_vm.beforeUploadLogo,\"on-success\":_vm.handleLogoUploadSuccess,\"show-file-list\":false}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"上传图片\")])],1)],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addBrandDialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('newBrandForm')}}},[_vm._v(\"确定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"编辑品牌\",\"visible\":_vm.editBrandDialogVisible},on:{\"update:visible\":function($event){_vm.editBrandDialogVisible=$event}}},[_c('el-form',{ref:\"editBrandForm\",attrs:{\"model\":_vm.currentBrand,\"rules\":_vm.rules,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"label\":\"品牌名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.currentBrand.name),callback:function ($$v) {_vm.$set(_vm.currentBrand, \"name\", $$v)},expression:\"currentBrand.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"品牌描述\",\"prop\":\"description\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.currentBrand.description),callback:function ($$v) {_vm.$set(_vm.currentBrand, \"description\", $$v)},expression:\"currentBrand.description\"}})],1),_c('el-form-item',{attrs:{\"label\":\"品牌Logo\",\"prop\":\"logo\"}},[_c('el-input',{model:{value:(_vm.currentBrand.logo),callback:function ($$v) {_vm.$set(_vm.currentBrand, \"logo\", $$v)},expression:\"currentBrand.logo\"}}),_c('el-upload',{ref:\"uploadLogo\",staticClass:\"upload-demo\",attrs:{\"action\":_vm.uploadUrl,\"before-upload\":_vm.beforeUploadLogo,\"on-success\":_vm.handleLogoUploadSuccess,\"show-file-list\":false}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"上传图片\")])],1)],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editBrandDialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitEditForm('editBrandForm')}}},[_vm._v(\"确定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"确认删除\",\"visible\":_vm.deleteBrandDialogVisible},on:{\"update:visible\":function($event){_vm.deleteBrandDialogVisible=$event}}},[_c('span',[_vm._v(\"你确定要删除这个品牌吗？\")]),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.deleteBrandDialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.deleteBrand}},[_vm._v(\"确定\")])],1)]),_c('el-dialog',{attrs:{\"visible\":_vm.imageDialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.imageDialogVisible=$event}}},[_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"src\":_vm.currentImage}})])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n     <div class=\"brands-container\">\n    <el-card class=\"card\">\n      <div class=\"title\">【商品品牌管理】</div>\n      <div class=\"center\">\n        <!-- 搜索框 -->\n        <div class=\"search-bar\">\n          <el-input v-model=\"searchQuery\" placeholder=\"请输入品牌名称\" clearable class=\"search-input\"></el-input>\n          <el-button type=\"primary\" @click=\"searchBrands\" class=\"search-button\">搜索</el-button>\n          <el-button type=\"success\" @click=\"showAddBrandDialog\" class=\"search-button\">新增品牌</el-button>\n        </div>\n        <!-- 列表 -->\n        <el-table :data=\"brands\" style=\"width: 100%\" stripe class=\"brand-table\">\n          <el-table-column prop=\"name\" sortable label=\"品牌名称\"></el-table-column>\n          <el-table-column prop=\"description\" sortable label=\"品牌描述\"></el-table-column>\n          <el-table-column label=\"品牌Logo\">\n            <template slot-scope=\"scope\">\n              <el-image v-if=\"scope.row.logo\" :src=\"scope.row.logo\" :preview-src-list=\"[scope.row.logo]\"\n                @error=\"handleImageError\" style=\"width: 80px; height: 80px;\" />\n            </template>\n          </el-table-column>\n          <el-table-column label=\"操作\" width=\"160\">\n            <template slot-scope=\"scope\">\n              <el-button size=\"mini\" @click=\"editBrand(scope.row)\">编辑</el-button>\n              <el-button size=\"mini\" type=\"danger\" @click=\"confirmDeleteBrand(scope.row)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n        <!-- 分页 -->\n        <el-pagination\n          @current-change=\"handlePageChange\"\n          :current-page=\"currentPage\"\n          :page-size=\"pageSize\"\n          layout=\"total, prev, pager, next\"\n          :total=\"totalBrands\"\n          class=\"pagination\">\n        </el-pagination>\n      </div>\n    </el-card>\n      <!-- 新增品牌弹窗 -->\n      <el-dialog title=\"新增品牌\" :visible.sync=\"addBrandDialogVisible\">\n        <el-form :model=\"newBrand\" :rules=\"rules\" ref=\"newBrandForm\" label-position=\"top\">\n          <el-form-item label=\"品牌名称\" prop=\"name\">\n            <el-input v-model=\"newBrand.name\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"品牌描述\" prop=\"description\">\n            <el-input type=\"textarea\" v-model=\"newBrand.description\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"品牌Logo\" prop=\"logo\">\n            <el-input v-model=\"newBrand.logo\"></el-input>\n            <el-upload ref=\"uploadLogo\" class=\"upload-demo\" :action=\"uploadUrl\" :before-upload=\"beforeUploadLogo\"\n              :on-success=\"handleLogoUploadSuccess\" :show-file-list=\"false\">\n              <el-button size=\"small\" type=\"primary\">上传图片</el-button>\n            </el-upload>\n          </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"addBrandDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"submitForm('newBrandForm')\">确定</el-button>\n        </div>\n      </el-dialog>\n      <!-- 编辑品牌弹窗 -->\n      <el-dialog title=\"编辑品牌\" :visible.sync=\"editBrandDialogVisible\">\n        <el-form :model=\"currentBrand\" :rules=\"rules\" ref=\"editBrandForm\" label-position=\"top\">\n          <el-form-item label=\"品牌名称\" prop=\"name\">\n            <el-input v-model=\"currentBrand.name\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"品牌描述\" prop=\"description\">\n            <el-input type=\"textarea\" v-model=\"currentBrand.description\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"品牌Logo\" prop=\"logo\">\n            <el-input v-model=\"currentBrand.logo\"></el-input>\n            <el-upload ref=\"uploadLogo\" class=\"upload-demo\" :action=\"uploadUrl\" :before-upload=\"beforeUploadLogo\"\n              :on-success=\"handleLogoUploadSuccess\" :show-file-list=\"false\">\n              <el-button size=\"small\" type=\"primary\">上传图片</el-button>\n            </el-upload>\n          </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"editBrandDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"submitEditForm('editBrandForm')\">确定</el-button>\n        </div>\n      </el-dialog>\n      <!-- 删除确认弹窗 -->\n      <el-dialog title=\"确认删除\" :visible.sync=\"deleteBrandDialogVisible\">\n        <span>你确定要删除这个品牌吗？</span>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"deleteBrandDialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"deleteBrand\">确定</el-button>\n        </div>\n      </el-dialog>\n      <el-dialog :visible.sync=\"imageDialogVisible\" width=\"30%\">\n      <img :src=\"currentImage\" style=\"width: 100%;\" />\n    </el-dialog>\n    </div>\n  </template>\n  \n  <script>\n  import { addBrand, getBrandsPaged, deleteBrandById, updateBrand, searchBrandsByName, uploadFile } from '@/api/index.js';\n  import { baseUrl } from '@/config/index';\n  \n  export default {\n    name: 'Brands',\n    data() {\n      return {\n        searchQuery: '',\n        brands: [],\n        currentPage: 1,\n        pageSize: 10,\n        totalBrands: 0,\n        addBrandDialogVisible: false,\n        editBrandDialogVisible: false,\n        deleteBrandDialogVisible: false,\n        newBrand: {\n          name: '',\n          description: '',\n          logo: ''\n        },\n        currentBrand: {},\n        brandToDelete: null,\n        rules: {\n          name: [{ required: true, message: '请输入品牌名称', trigger: 'blur' }],\n          description: [{ required: true, message: '请输入品牌描述', trigger: 'blur' }],\n          logo: [{ required: true, message: '请输入品牌Logo', trigger: 'blur' }]\n        },\n        uploadUrl: '/api/v1/fileUpload/upload', \n        imageDialogVisible: false,\n        currentImage: ''\n      };\n    },\n    mounted() {\n      this.fetchBrands();\n    },\n    methods: {\n      async fetchBrands() {\n        try {\n          const response = await getBrandsPaged(this.currentPage - 1, this.pageSize, 'id');\n          if (response.code === 0) {\n            this.brands = response.data; // 确保数据绑定到 brands 变量上\n            this.totalBrands = response.data.length; // 更新 totalBrands\n          } else {\n            this.$message.error('获取品牌列表失败: ' + response.message);\n          }\n        } catch (error) {\n          this.$message.error('获取品牌列表失败: ' + error.message);\n        }\n      },\n      async searchBrands() {\n        try {\n          const response = await searchBrandsByName(this.searchQuery);\n          if (response.code === 0) {\n            this.brands = response.data; // 确保数据绑定到 brands 变量上\n            this.totalBrands = response.data.length; // 更新 totalBrands\n          } else {\n            this.$message.error('搜索品牌失败: ' + response.message);\n          }\n        } catch (error) {\n          this.$message.error('搜索品牌失败: ' + error.message);\n        }\n      },\n      handlePageChange(page) {\n        this.currentPage = page;\n        this.fetchBrands();\n      },\n      showAddBrandDialog() {\n        this.addBrandDialogVisible = true;\n      },\n      async addBrand() {\n        try {\n          const response = await addBrand(this.newBrand);\n          if (response.code === 0) {\n            this.$message.success('新增品牌成功');\n            this.addBrandDialogVisible = false;\n            this.fetchBrands();\n          } else {\n            this.$message.error('新增品牌失败: ' + response.message);\n          }\n        } catch (error) {\n          this.$message.error('新增品牌失败: ' + error.message);\n        }\n      },\n      async editBrand(brand) {\n        this.currentBrand = { ...brand };\n        this.editBrandDialogVisible = true;\n      },\n      async submitEditForm(formName) {\n        this.$refs[formName].validate(async (valid) => {\n          if (valid) {\n            try {\n              const response = await updateBrand(this.currentBrand);\n              if (response.code === 0) {\n                this.$message.success('编辑品牌成功');\n                this.editBrandDialogVisible = false;\n                this.fetchBrands();\n              } else {\n                this.$message.error('编辑品牌失败: ' + response.message);\n              }\n            } catch (error) {\n              this.$message.error('编辑品牌失败: ' + error.message);\n            }\n          } else {\n            this.$message.error('请填写完整的品牌信息');\n          }\n        });\n      },\n      confirmDeleteBrand(brand) {\n        this.brandToDelete = brand;\n        this.deleteBrandDialogVisible = true;\n      },\n      async deleteBrand() {\n        try {\n          const response = await deleteBrandById(this.brandToDelete.id);\n          if (response.code === 0) {\n            this.$message.success('删除品牌成功');\n            this.deleteBrandDialogVisible = false;\n            this.fetchBrands();\n          } else {\n            this.$message.error('删除品牌失败: ' + response.message);\n          }\n        } catch (error) {\n          this.$message.error('删除品牌失败: ' + error.message);\n        }\n      },\n      submitForm(formName) {\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n            this.addBrand();\n          } else {\n            this.$message.error('请填写完整的品牌信息');\n          }\n        });\n      },\n      handleLogoUploadSuccess(response) {\n        if (response.code === 0) {\n          const logoUrl = `${baseUrl}/v1/getLatestImage?fileName=${response.data}`;\n          if (this.addBrandDialogVisible) {\n            this.newBrand.logo = logoUrl;\n          } else if (this.editBrandDialogVisible) {\n            this.currentBrand.logo = logoUrl;\n          }\n          this.$message.success('图片上传成功');\n        } else {\n          if (response.code === 401) {\n            this.$message.error('登录超时，请重新登录');\n          } else {\n            this.$message.error('图片上传失败: ' + response.message);\n          }\n        }\n      },\n      beforeUploadLogo(file) {\n        const formData = new FormData();\n        formData.append('file', file);\n        formData.append('userId', window.localStorage.getItem('SET_NAME'));// 获取storage中SET_NAME的值\n        formData.append('type', 'logo');\n        this.uploadFile(formData);\n        return false; // 阻止 el-upload 的默认上传行为\n      },\n      async uploadFile(formData) {\n        try {\n          const response = await uploadFile(formData);\n          this.handleLogoUploadSuccess(response);\n        } catch (error) {\n          if (error.response && error.response.status === 401) {\n            this.$message.error('登录超时，请重新登录');\n          } else {\n            this.$message.error('图片上传失败: ' + error.message);\n          }\n        }\n      },\n      showImageDialog(imageUrl) {\n      this.currentImage = imageUrl;\n      this.imageDialogVisible = true;\n    }\n    }\n  };\n  </script>\n  \n  <style lang=\"less\" scoped>\n  .card {\n  min-height: 500px;\n\n  .title {\n    width: 200px;\n  }\n}\n\n.search-bar {\n  margin: 20px 0;\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.search-input {\n  margin-right: 10px;\n  margin-bottom: 10px;\n  width: 100%;\n  max-width: 400px;\n}\n\n.search-button {\n  margin-right: 5px;\n  margin-bottom: 10px;\n}\n\n\n  </style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Brands.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Brands.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Brands.vue?vue&type=template&id=d1417886&scoped=true\"\nimport script from \"./Brands.vue?vue&type=script&lang=js\"\nexport * from \"./Brands.vue?vue&type=script&lang=js\"\nimport style0 from \"./Brands.vue?vue&type=style&index=0&id=d1417886&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d1417886\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Brands.vue?vue&type=style&index=0&id=d1417886&prod&lang=less&scoped=true\""],"sourceRoot":""}
{"version":3,"sources":["webpack:///./src/views/admin/BrandAuthorizationCertificate.vue?571e","webpack:///./src/views/admin/BrandAuthorizationCertificate.vue","webpack:///src/views/admin/BrandAuthorizationCertificate.vue","webpack:///./src/views/admin/BrandAuthorizationCertificate.vue?83ad","webpack:///./src/views/admin/BrandAuthorizationCertificate.vue?2988"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","model","value","searchQuery","callback","$$v","expression","on","searchCertificates","showAddCertificateDialog","staticStyle","certificates","scopedSlots","_u","key","fn","scope","row","imageUrl","handleImageError","_e","$event","editCertificate","confirmDeleteCertificate","currentPage","pageSize","totalCertificates","handlePageChange","addCertificateDialogVisible","ref","newCertificate","rules","name","$set","description","uploadUrl","beforeUploadCertificate","handleCertificateUploadSuccess","slot","submitForm","editCertificateDialogVisible","currentCertificate","submitEditForm","deleteCertificateDialogVisible","deleteCertificate","imageDialogVisible","currentImage","staticRenderFns","data","certificateToDelete","required","message","trigger","tableData","mounted","fetchCertificates","methods","response","getCertificatesPaged","code","length","$message","error","searchCertificatesByName","page","addCertificate","success","certificate","formName","$refs","validate","valid","updateCertificate","deleteCertificateById","id","baseUrl","file","formData","FormData","append","window","localStorage","getItem","uploadFile","status","showImageDialog","component"],"mappings":"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","file":"js/chunk-58a8cebe.46820da2.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BrandAuthorizationCertificate.vue?vue&type=style&index=0&id=ba04f798&prod&lang=less&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"certificate-container\"},[_c('el-card',{staticClass:\"card\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"【品牌授权证书管理】\")]),_c('div',{staticClass:\"center\"},[_c('div',{staticClass:\"search-bar\"},[_c('el-input',{staticClass:\"search-input\",attrs:{\"placeholder\":\"请输入证书名称\",\"clearable\":\"\"},model:{value:(_vm.searchQuery),callback:function ($$v) {_vm.searchQuery=$$v},expression:\"searchQuery\"}}),_c('el-button',{staticClass:\"search-button\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.searchCertificates}},[_vm._v(\"搜索\")]),_c('el-button',{staticClass:\"search-button\",attrs:{\"type\":\"success\"},on:{\"click\":_vm.showAddCertificateDialog}},[_vm._v(\"新增证书\")])],1),_c('el-table',{staticClass:\"certificate-table\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.certificates,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"sortable\":\"\",\"label\":\"证书名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"description\",\"sortable\":\"\",\"label\":\"证书描述\"}}),_c('el-table-column',{attrs:{\"label\":\"证书图片\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.imageUrl)?_c('el-image',{staticStyle:{\"width\":\"80px\",\"height\":\"80px\"},attrs:{\"src\":scope.row.imageUrl,\"preview-src-list\":[scope.row.imageUrl]},on:{\"error\":_vm.handleImageError}}):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"160\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.editCertificate(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.confirmDeleteCertificate(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-pagination',{staticClass:\"pagination\",attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"layout\":\"total, prev, pager, next\",\"total\":_vm.totalCertificates},on:{\"current-change\":_vm.handlePageChange}})],1)]),_c('el-dialog',{attrs:{\"title\":\"新增证书\",\"visible\":_vm.addCertificateDialogVisible},on:{\"update:visible\":function($event){_vm.addCertificateDialogVisible=$event}}},[_c('el-form',{ref:\"newCertificateForm\",attrs:{\"model\":_vm.newCertificate,\"rules\":_vm.rules,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"label\":\"证书名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.newCertificate.name),callback:function ($$v) {_vm.$set(_vm.newCertificate, \"name\", $$v)},expression:\"newCertificate.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"证书描述\",\"prop\":\"description\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.newCertificate.description),callback:function ($$v) {_vm.$set(_vm.newCertificate, \"description\", $$v)},expression:\"newCertificate.description\"}})],1),_c('el-form-item',{attrs:{\"label\":\"证书图片\",\"prop\":\"imageUrl\"}},[_c('el-input',{model:{value:(_vm.newCertificate.imageUrl),callback:function ($$v) {_vm.$set(_vm.newCertificate, \"imageUrl\", $$v)},expression:\"newCertificate.imageUrl\"}}),_c('el-upload',{ref:\"uploadCertificate\",staticClass:\"upload-demo\",attrs:{\"action\":_vm.uploadUrl,\"before-upload\":_vm.beforeUploadCertificate,\"on-success\":_vm.handleCertificateUploadSuccess,\"show-file-list\":false}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"上传图片\")])],1)],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addCertificateDialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('newCertificateForm')}}},[_vm._v(\"确定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"编辑证书\",\"visible\":_vm.editCertificateDialogVisible},on:{\"update:visible\":function($event){_vm.editCertificateDialogVisible=$event}}},[_c('el-form',{ref:\"editCertificateForm\",attrs:{\"model\":_vm.currentCertificate,\"rules\":_vm.rules,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"label\":\"证书名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.currentCertificate.name),callback:function ($$v) {_vm.$set(_vm.currentCertificate, \"name\", $$v)},expression:\"currentCertificate.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"证书描述\",\"prop\":\"description\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.currentCertificate.description),callback:function ($$v) {_vm.$set(_vm.currentCertificate, \"description\", $$v)},expression:\"currentCertificate.description\"}})],1),_c('el-form-item',{attrs:{\"label\":\"证书图片\",\"prop\":\"imageUrl\"}},[_c('el-input',{model:{value:(_vm.currentCertificate.imageUrl),callback:function ($$v) {_vm.$set(_vm.currentCertificate, \"imageUrl\", $$v)},expression:\"currentCertificate.imageUrl\"}}),_c('el-upload',{ref:\"uploadCertificate\",staticClass:\"upload-demo\",attrs:{\"action\":_vm.uploadUrl,\"before-upload\":_vm.beforeUploadCertificate,\"on-success\":_vm.handleCertificateUploadSuccess,\"show-file-list\":false}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"上传图片\")])],1)],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editCertificateDialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitEditForm('editCertificateForm')}}},[_vm._v(\"确定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"确认删除\",\"visible\":_vm.deleteCertificateDialogVisible},on:{\"update:visible\":function($event){_vm.deleteCertificateDialogVisible=$event}}},[_c('span',[_vm._v(\"你确定要删除这个证书吗？\")]),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.deleteCertificateDialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.deleteCertificate}},[_vm._v(\"确定\")])],1)]),_c('el-dialog',{attrs:{\"visible\":_vm.imageDialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.imageDialogVisible=$event}}},[_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"src\":_vm.currentImage}})])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"certificate-container\">\n    <el-card class=\"card\">\n      <div class=\"title\">【品牌授权证书管理】</div>\n      <div class=\"center\">\n        <!-- 搜索框 -->\n        <div class=\"search-bar\">\n          <el-input v-model=\"searchQuery\" placeholder=\"请输入证书名称\" clearable class=\"search-input\"></el-input>\n          <el-button type=\"primary\" @click=\"searchCertificates\" class=\"search-button\">搜索</el-button>\n          <el-button type=\"success\" @click=\"showAddCertificateDialog\" class=\"search-button\">新增证书</el-button>\n        </div>\n        <!-- 列表 -->\n        <el-table :data=\"certificates\" style=\"width: 100%\" stripe class=\"certificate-table\">\n          <el-table-column prop=\"name\" sortable label=\"证书名称\"></el-table-column>\n          <el-table-column prop=\"description\" sortable label=\"证书描述\"></el-table-column>\n          <el-table-column label=\"证书图片\">\n            <template slot-scope=\"scope\">\n              <el-image v-if=\"scope.row.imageUrl\" :src=\"scope.row.imageUrl\" :preview-src-list=\"[scope.row.imageUrl]\"\n                @error=\"handleImageError\" style=\"width: 80px; height: 80px;\" />\n            </template>\n          </el-table-column>\n          <el-table-column label=\"操作\" width=\"160\">\n            <template slot-scope=\"scope\">\n              <el-button size=\"mini\" @click=\"editCertificate(scope.row)\">编辑</el-button>\n              <el-button size=\"mini\" type=\"danger\" @click=\"confirmDeleteCertificate(scope.row)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n        <!-- 分页 -->\n        <el-pagination\n          @current-change=\"handlePageChange\"\n          :current-page=\"currentPage\"\n          :page-size=\"pageSize\"\n          layout=\"total, prev, pager, next\"\n          :total=\"totalCertificates\"\n          class=\"pagination\">\n        </el-pagination>\n      </div>\n    </el-card>\n    <!-- 新增证书弹窗 -->\n    <el-dialog title=\"新增证书\" :visible.sync=\"addCertificateDialogVisible\">\n      <el-form :model=\"newCertificate\" :rules=\"rules\" ref=\"newCertificateForm\" label-position=\"top\">\n        <el-form-item label=\"证书名称\" prop=\"name\">\n          <el-input v-model=\"newCertificate.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"证书描述\" prop=\"description\">\n          <el-input type=\"textarea\" v-model=\"newCertificate.description\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"证书图片\" prop=\"imageUrl\">\n          <el-input v-model=\"newCertificate.imageUrl\"></el-input>\n          <el-upload ref=\"uploadCertificate\" class=\"upload-demo\" :action=\"uploadUrl\"\n            :before-upload=\"beforeUploadCertificate\" :on-success=\"handleCertificateUploadSuccess\" :show-file-list=\"false\">\n            <el-button size=\"small\" type=\"primary\">上传图片</el-button>\n          </el-upload>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"addCertificateDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submitForm('newCertificateForm')\">确定</el-button>\n      </div>\n    </el-dialog>\n    <!-- 编辑证书弹窗 -->\n    <el-dialog title=\"编辑证书\" :visible.sync=\"editCertificateDialogVisible\">\n      <el-form :model=\"currentCertificate\" :rules=\"rules\" ref=\"editCertificateForm\" label-position=\"top\">\n        <el-form-item label=\"证书名称\" prop=\"name\">\n          <el-input v-model=\"currentCertificate.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"证书描述\" prop=\"description\">\n          <el-input type=\"textarea\" v-model=\"currentCertificate.description\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"证书图片\" prop=\"imageUrl\">\n          <el-input v-model=\"currentCertificate.imageUrl\"></el-input>\n          <el-upload ref=\"uploadCertificate\" class=\"upload-demo\" :action=\"uploadUrl\"\n            :before-upload=\"beforeUploadCertificate\" :on-success=\"handleCertificateUploadSuccess\" :show-file-list=\"false\">\n            <el-button size=\"small\" type=\"primary\">上传图片</el-button>\n          </el-upload>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editCertificateDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"submitEditForm('editCertificateForm')\">确定</el-button>\n      </div>\n    </el-dialog>\n    <!-- 删除确认弹窗 -->\n    <el-dialog title=\"确认删除\" :visible.sync=\"deleteCertificateDialogVisible\">\n      <span>你确定要删除这个证书吗？</span>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"deleteCertificateDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"deleteCertificate\">确定</el-button>\n      </div>\n    </el-dialog>\n    <el-dialog :visible.sync=\"imageDialogVisible\" width=\"30%\">\n      <img :src=\"currentImage\" style=\"width: 100%;\" />\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { addCertificate, getCertificatesPaged, deleteCertificateById, updateCertificate, searchCertificatesByName, uploadFile, searchCertificates } from '@/api/index.js';\nimport { baseUrl } from '@/config/index';\n\nexport default {\n  name: 'BrandAuthorizationCertificate',\n  data() {\n    return {\n      searchQuery: '',\n      certificates: [],\n      currentPage: 1,\n      pageSize: 10,\n      totalCertificates: 0,\n      addCertificateDialogVisible: false,\n      editCertificateDialogVisible: false,\n      deleteCertificateDialogVisible: false,\n      // 新增\n      newCertificate: {\n        name: '',\n        description: '',\n        imageUrl: ''\n      },\n      // 编辑\n      currentCertificate: {\n        name: '',\n        description: '',\n        imageUrl: ''\n      },\n      certificateToDelete: null,\n      rules: {\n        name: [{ required: true, message: '请输入证书名称', trigger: 'blur' }],\n        description: [{ required: true, message: '请输入证书描述', trigger: 'blur' }],\n        imageUrl: [{ required: true, message: '请上传证书图片', trigger: 'blur' }]\n      },\n      uploadUrl: '/api/v1/fileUpload/upload',\n      imageDialogVisible: false,\n      currentImage: '',\n      tableData: [], // 定义 tableData 并初始化为空数组\n    };\n  },\n  mounted() {\n    this.fetchCertificates();\n  },\n  methods: {\n    async fetchCertificates() {\n      try {\n        const response = await getCertificatesPaged(this.currentPage - 1, this.pageSize, 'id');\n        if (response.code === 0) {\n          this.certificates = response.data;\n          this.totalCertificates = response.data.length;\n        } else {\n          this.$message.error('获取证书列表失败: ' + response.message);\n        }\n      } catch (error) {\n        this.$message.error('获取证书列表失败: ' + error.message);\n      }\n    },\n    async searchCertificates() {\n      try {\n        const response = await searchCertificatesByName(this.searchQuery);\n        if (response.code === 0) {\n          this.certificates = response.data;\n          this.totalCertificates = response.data.length;\n        } else {\n          this.$message.error('搜索证书失败: ' + response.message);\n        }\n      } catch (error) {\n        this.$message.error('搜索证书失败: ' + error.message);\n      }\n    },\n    handlePageChange(page) {\n      this.currentPage = page;\n      this.fetchCertificates();\n    },\n    showAddCertificateDialog() {\n      this.addCertificateDialogVisible = true;\n    },\n    handleImageError() {\n      this.$message.error('图片加载失败');\n    },\n    async addCertificate() {\n      try {\n        const response = await addCertificate(this.newCertificate);\n        if (response.code === 0) {\n          this.$message.success('新增证书成功');\n          this.addCertificateDialogVisible = false;\n          this.fetchCertificates();\n        } else {\n          this.$message.error('新增证书失败: ' + response.message);\n        }\n      } catch (error) {\n        this.$message.error('新增证书失败: ' + error.message);\n      }\n    },\n    async editCertificate(certificate) {\n      this.currentCertificate = { ...certificate };// 展开运算符。创建一个 certificate 对象的浅拷贝，并将其赋值给 this.currentCertificate。这样可以避免直接修改原始的 certificate 对象，确保数据的独立性和安全性。\n      this.editCertificateDialogVisible = true;\n    },\n    async submitEditForm(formName) {\n      this.$refs[formName].validate(async (valid) => {\n        if (valid) {\n          try {\n            const response = await updateCertificate(this.currentCertificate);\n            if (response.code === 0) {\n              this.$message.success('编辑证书成功');\n              this.editCertificateDialogVisible = false;\n              this.fetchCertificates();\n            } else {\n              this.$message.error('编辑证书失败: ' + response.message);\n            }\n          } catch (error) {\n            this.$message.error('编辑证书失败: ' + error.message);\n          }\n        } else {\n          this.$message.error('请填写完整的证书信息');\n        }\n      });\n    },\n    confirmDeleteCertificate(certificate) {\n      this.certificateToDelete = certificate;\n      this.deleteCertificateDialogVisible = true;\n    },\n    async deleteCertificate() {\n      try {\n        const response = await deleteCertificateById(this.certificateToDelete.id);\n        if (response.code === 0) {\n          this.$message.success('删除证书成功');\n          this.deleteCertificateDialogVisible = false;\n          this.fetchCertificates();\n        } else {\n          this.$message.error('删除证书失败: ' + response.message);\n        }\n      } catch (error) {\n        this.$message.error('删除证书失败: ' + error.message);\n      }\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.addCertificate();\n        } else {\n          this.$message.error('请填写完整的证书信息');\n        }\n      });\n    },\n    handleCertificateUploadSuccess(response) {\n      if (response.code === 0) {\n        const imageUrl = `${baseUrl}/v1/getLatestImage?fileName=${response.data}`;\n        if (this.addCertificateDialogVisible) {\n          this.$set(this.newCertificate, 'imageUrl', imageUrl);\n        } else if (this.editCertificateDialogVisible) {\n          this.$set(this.currentCertificate, 'imageUrl', imageUrl);\n        }\n        this.$message.success('图片上传成功');\n      } else {\n        if (response.code === 401) {\n          this.$message.error('登录超时，请重新登录');\n        } else {\n          this.$message.error('图片上传失败: ' + response.message);\n        }\n      }\n    },\n    beforeUploadCertificate(file) {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('userId', window.localStorage.getItem('SET_NAME'));\n      formData.append('type', 'certificate');\n      this.uploadFile(formData);\n      return false;\n    },\n    async uploadFile(formData) {\n      try {\n        const response = await uploadFile(formData);\n        this.handleCertificateUploadSuccess(response);\n      } catch (error) {\n        if (error.response && error.response.status === 401) {\n          this.$message.error('登录超时，请重新登录');\n        } else {\n          this.$message.error('图片上传失败: ' + error.message);\n        }\n      }\n    },\n    showImageDialog(imageUrl) {\n      this.currentImage = imageUrl;\n      this.imageDialogVisible = true;\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.certificate-container {\n  padding: 20px;\n}\n\n.card {\n  min-height: 500px;\n}\n\n.title {\n  font-size: 20px;\n  font-weight: bold;\n  margin-bottom: 20px;\n}\n\n.search-bar {\n  display: flex;\n  flex-wrap: wrap;\n  margin-bottom: 20px;\n}\n\n.search-input {\n  flex: 1;\n  margin-right: 10px;\n  margin-bottom: 10px;\n}\n\n.search-button {\n  margin-right: 10px;\n  margin-bottom: 10px;\n}\n\n.certificate-table {\n  margin-bottom: 20px;\n}\n\n.pagination {\n  text-align: center;\n}\n\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BrandAuthorizationCertificate.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BrandAuthorizationCertificate.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./BrandAuthorizationCertificate.vue?vue&type=template&id=ba04f798&scoped=true\"\nimport script from \"./BrandAuthorizationCertificate.vue?vue&type=script&lang=js\"\nexport * from \"./BrandAuthorizationCertificate.vue?vue&type=script&lang=js\"\nimport style0 from \"./BrandAuthorizationCertificate.vue?vue&type=style&index=0&id=ba04f798&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ba04f798\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-980f04de"],{"043e":function(e,t,a){"use strict";a("460e")},"460e":function(e,t,a){},"82fe":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"info-container"},[t("el-card",{staticClass:"card"},[t("div",{staticClass:"title"},[e._v("【基础信息配置】")]),t("div",{staticClass:"center"}),t("el-form",{staticClass:"input-width",attrs:{model:e.footerData,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"首页标题"}},[t("el-input",{model:{value:e.footerData.homeTitle,callback:function(t){e.$set(e.footerData,"homeTitle",t)},expression:"footerData.homeTitle"}})],1),t("el-form-item",{attrs:{label:"首页描述"}},[t("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.footerData.homeDescription,callback:function(t){e.$set(e.footerData,"homeDescription",t)},expression:"footerData.homeDescription"}})],1),t("el-form-item",{attrs:{label:"电话"}},[t("el-input",{model:{value:e.footerData.phone,callback:function(t){e.$set(e.footerData,"phone",t)},expression:"footerData.phone"}})],1),t("el-form-item",{attrs:{label:"邮箱"}},[t("el-input",{model:{value:e.footerData.email,callback:function(t){e.$set(e.footerData,"email",t)},expression:"footerData.email"}})],1),t("el-form-item",{attrs:{label:"地址"}},[t("el-input",{model:{value:e.footerData.address,callback:function(t){e.$set(e.footerData,"address",t)},expression:"footerData.address"}})],1),t("el-form-item",{attrs:{label:"网站logo"}},[t("el-input",{model:{value:e.footerData.beianImage,callback:function(t){e.$set(e.footerData,"beianImage",t)},expression:"footerData.beianImage"}}),t("el-upload",{ref:"logoUpload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,"before-upload":e.beforeLogoUpload,"on-success":e.handleLogoUploadSuccess,"show-file-list":!1}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传logo")])],1)],1),t("el-form-item",{attrs:{label:"微信客服二维码"}},[t("el-input",{model:{value:e.footerData.weChatImage,callback:function(t){e.$set(e.footerData,"weChatImage",t)},expression:"footerData.weChatImage"}}),t("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,"before-upload":e.beforeUpload,"on-success":e.handleUploadSuccess,"show-file-list":!1}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1),t("el-form-item",{attrs:{label:"ICP"}},[t("el-input",{model:{value:e.footerData.icp,callback:function(t){e.$set(e.footerData,"icp",t)},expression:"footerData.icp"}})],1),t("el-form-item",{attrs:{label:"公安信息"}},[t("el-input",{model:{value:e.footerData.publicSecurity,callback:function(t){e.$set(e.footerData,"publicSecurity",t)},expression:"footerData.publicSecurity"}})],1),t("el-form-item",{attrs:{label:"版权"}},[t("el-input",{model:{value:e.footerData.copyright,callback:function(t){e.$set(e.footerData,"copyright",t)},expression:"footerData.copyright"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.saveFooterData}},[e._v("保存")])],1)],1)],1)],1)},s=[],r=a("365c"),l=a("f121"),i={name:"Info",data(){return{footerData:{id:1,phone:"",email:"",address:"",weChatImage:"",beianImage:"",icp:"",publicSecurity:"",copyright:"",homeTitle:"",homeDescription:""},uploadUrl:"/v1/fileUpload/upload"}},mounted(){this.fetchFooterData()},methods:{async fetchFooterData(){try{const e=await Object(r["o"])();0===e.code&&e.data.length>0?this.footerData=e.data[0]:console.error("Failed to fetch footer data:",e.message)}catch(e){console.error("Failed to fetch footer data:",e)}},async saveFooterData(){try{const e=await Object(r["A"])(this.footerData);0===e.code?this.$message.success("保存成功"):this.$message.error("保存失败: "+e.message)}catch(e){401===e.response.status?this.$message.error("登录超时，请重新登录"):this.$message.error("保存失败: "+e)}},handleUploadSuccess(e){0===e.code?(this.footerData.weChatImage=`${l["a"]}/v1/getLatestImage?fileName=${e.data}`,this.$message.success("图片上传成功")):401===e.code?this.$message.error("登录超时，请重新登录"):this.$message.error("图片上传失败: "+e.message)},beforeUpload(e){const t=new FormData;return t.append("file",e),t.append("userId",localStorage.getItem("SET_NAME")),this.uploadFile(t),!1},async uploadFile(e){try{const t=await service.post(this.uploadUrl,e);this.handleUploadSuccess(t)}catch(t){401===response.code?this.$message.error("登录超时，请重新登录"):this.$message.error("图片上传失败: "+response.message)}},handleLogoUploadSuccess(e){0===e.code?(this.footerData.beianImage=`${l["a"]}/v1/getLatestImage?fileName=${e.data}`,this.$message.success("Logo上传成功")):401===e.code?this.$message.error("登录超时，请重新登录"):this.$message.error("Logo上传失败: "+e.message)},beforeLogoUpload(e){const t=new FormData;return t.append("file",e),t.append("userId",localStorage.getItem("SET_NAME")),this.uploadLogo(t),!1},async uploadLogo(e){try{const t=await service.post(this.uploadUrl,e);this.handleLogoUploadSuccess(t)}catch(t){t.response&&401===t.response.status?this.$message.error("登录超时，请重新登录"):this.$message.error("Logo上传失败: "+t.message)}}}},c=i,n=(a("043e"),a("2877")),p=Object(n["a"])(c,o,s,!1,null,"def5fa70",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-980f04de.8d7962ff.js.map
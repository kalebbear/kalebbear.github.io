(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f3d772a8"],{"29ba":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"card"},[e("div",{staticClass:"title"},[t._v("【横向商品配置】")]),e("div",{staticClass:"center"}),e("el-form",{attrs:{model:t.form},nativeOn:{submit:function(e){return e.preventDefault(),t.addProductToCarousel.apply(null,arguments)}}},[e("el-form-item",{attrs:{label:"选择商品"}},[e("el-select",{attrs:{placeholder:"请选择商品"},model:{value:t.form.selectedProduct,callback:function(e){t.$set(t.form,"selectedProduct",e)},expression:"form.selectedProduct"}},t._l(t.products,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.addProductToCarousel}},[t._v("添加")])],1)],1),t.carouselItems.length?e("div",[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.carouselItems}},[e("el-table-column",{attrs:{prop:"name",label:"商品名称"}}),e("el-table-column",{attrs:{prop:"coverImage",label:"商品图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.row.coverImage,fit:"cover",alt:"商品图片"}})]}}],null,!1,452709689)}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.removeProductFromCarousel(r.row.id)}}},[t._v("删除")])]}}],null,!1,342874171)})],1)],1):t._e(),e("div",{staticClass:"save-button"},[e("el-button",{attrs:{type:"success"},on:{click:t.saveCarouselConfig}},[t._v("保存配置")])],1)],1)],1)},s=[],a=(r("14d9"),r("e9f5"),r("910d"),r("f665"),r("ab43"),r("a732"),r("365c")),n={name:"ProductsCarousels",data(){return{form:{selectedProduct:null},products:[],carouselItems:[]}},methods:{async fetchProducts(){try{const t=await Object(a["k"])();0===t.code?this.products=t.data:this.$message.error("获取商品数据失败: "+t.message)}catch(t){console.error("获取商品数据失败:",t),this.$message.error("获取商品数据失败")}},addProductToCarousel(){if(this.form.selectedProduct){const t=this.products.find(t=>t.id===this.form.selectedProduct);t&&!this.carouselItems.some(e=>e.id===t.id)?(this.carouselItems.push(t),console.log("添加商品ID:",this.form.selectedProduct)):this.$message.error("该商品已在轮播图中")}else this.$message.error("请选择一个商品")},async removeProductFromCarousel(t){this.carouselItems=this.carouselItems.filter(e=>e.id!==t),this.$message.success("商品已从轮播图中删除")},async saveCarouselConfig(){console.log("准备保存配置，当前商品ID:",this.carouselItems.map(t=>t.id));try{const t=await Object(a["B"])({id:1,products:this.carouselItems.map(t=>t.id)});console.log("保存配置响应:",t),0===t.code?this.$message.success("轮播图配置已保存"):this.$message.error("保存配置失败: "+t.message)}catch(t){console.error("保存配置失败:",t),this.$message.error("保存配置失败")}},async fetchCarouselConfig(){console.log("获取当前轮播图配置");try{const t=await Object(a["q"])(1);0===t.code?this.carouselItems=t.data.products:this.$message.error("获取轮播图配置失败: "+t.message)}catch(t){console.error("获取轮播图配置失败:",t),this.$message.error("获取轮播图配置失败")}}},mounted(){this.fetchProducts(),this.fetchCarouselConfig()}},c=n,i=(r("e305"),r("2877")),u=Object(i["a"])(c,o,s,!1,null,"51ad8b1b",null);e["default"]=u.exports},4754:function(t,e,r){"use strict";t.exports=function(t,e){return{value:t,done:e}}},6964:function(t,e,r){"use strict";var o=r("cb2d");t.exports=function(t,e,r){for(var s in e)o(t,s,e[s],r);return t}},"81ce":function(t,e,r){},"910d":function(t,e,r){"use strict";var o=r("23e7"),s=r("c65b"),a=r("59ed"),n=r("825a"),c=r("46c4"),i=r("c5cc"),u=r("9bdd"),l=r("c430"),d=i((function(){var t,e,r,o=this.iterator,a=this.predicate,c=this.next;while(1){if(t=n(s(c,o)),e=this.done=!!t.done,e)return;if(r=t.value,u(o,a,[r,this.counter++],!0))return r}}));o({target:"Iterator",proto:!0,real:!0,forced:l},{filter:function(t){return n(this),a(t),new d(c(this),{predicate:t})}})},"9bdd":function(t,e,r){"use strict";var o=r("825a"),s=r("2a62");t.exports=function(t,e,r,a){try{return a?e(o(r)[0],r[1]):e(r)}catch(n){s(t,"throw",n)}}},a732:function(t,e,r){"use strict";var o=r("23e7"),s=r("2266"),a=r("59ed"),n=r("825a"),c=r("46c4");o({target:"Iterator",proto:!0,real:!0},{some:function(t){n(this),a(t);var e=c(this),r=0;return s(e,(function(e,o){if(t(e,r++))return o()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},ab43:function(t,e,r){"use strict";var o=r("23e7"),s=r("d024"),a=r("c430");o({target:"Iterator",proto:!0,real:!0,forced:a},{map:s})},c5cc:function(t,e,r){"use strict";var o=r("c65b"),s=r("7c73"),a=r("9112"),n=r("6964"),c=r("b622"),i=r("69f3"),u=r("dc4a"),l=r("ae93").IteratorPrototype,d=r("4754"),f=r("2a62"),h=c("toStringTag"),m="IteratorHelper",p="WrapForValidIterator",v=i.set,b=function(t){var e=i.getterFor(t?p:m);return n(s(l),{next:function(){var r=e(this);if(t)return r.nextHandler();if(r.done)return d(void 0,!0);try{var o=r.nextHandler();return r.returnHandlerResult?o:d(o,r.done)}catch(s){throw r.done=!0,s}},return:function(){var r=e(this),s=r.iterator;if(r.done=!0,t){var a=u(s,"return");return a?o(a,s):d(void 0,!0)}if(r.inner)try{f(r.inner.iterator,"normal")}catch(n){return f(s,"throw",n)}return s&&f(s,"normal"),d(void 0,!0)}})},g=b(!0),I=b(!1);a(I,h,"Iterator Helper"),t.exports=function(t,e,r){var o=function(o,s){s?(s.iterator=o.iterator,s.next=o.next):s=o,s.type=e?p:m,s.returnHandlerResult=!!r,s.nextHandler=t,s.counter=0,s.done=!1,v(this,s)};return o.prototype=e?g:I,o}},d024:function(t,e,r){"use strict";var o=r("c65b"),s=r("59ed"),a=r("825a"),n=r("46c4"),c=r("c5cc"),i=r("9bdd"),u=c((function(){var t=this.iterator,e=a(o(this.next,t)),r=this.done=!!e.done;if(!r)return i(t,this.mapper,[e.value,this.counter++],!0)}));t.exports=function(t){return a(this),s(t),new u(n(this),{mapper:t})}},e305:function(t,e,r){"use strict";r("81ce")},f665:function(t,e,r){"use strict";var o=r("23e7"),s=r("2266"),a=r("59ed"),n=r("825a"),c=r("46c4");o({target:"Iterator",proto:!0,real:!0},{find:function(t){n(this),a(t);var e=c(this),r=0;return s(e,(function(e,o){if(t(e,r++))return o(e)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})}}]);
//# sourceMappingURL=chunk-f3d772a8.889f9931.js.map
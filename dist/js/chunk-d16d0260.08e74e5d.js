(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d16d0260"],{"3b0f":function(e,t,r){"use strict";r("8040")},4754:function(e,t,r){"use strict";e.exports=function(e,t){return{value:e,done:t}}},6964:function(e,t,r){"use strict";var s=r("cb2d");e.exports=function(e,t,r){for(var a in t)s(e,a,t[a],r);return e}},8040:function(e,t,r){},"910d":function(e,t,r){"use strict";var s=r("23e7"),a=r("c65b"),l=r("59ed"),o=r("825a"),i=r("46c4"),n=r("c5cc"),u=r("9bdd"),c=r("c430"),d=n((function(){var e,t,r,s=this.iterator,l=this.predicate,i=this.next;while(1){if(e=o(a(i,s)),t=this.done=!!e.done,t)return;if(r=e.value,u(s,l,[r,this.counter++],!0))return r}}));s({target:"Iterator",proto:!0,real:!0,forced:c},{filter:function(e){return o(this),l(e),new d(i(this),{predicate:e})}})},"9bdd":function(e,t,r){"use strict";var s=r("825a"),a=r("2a62");e.exports=function(e,t,r,l){try{return l?t(s(r)[0],r[1]):t(r)}catch(o){a(e,"throw",o)}}},c5cc:function(e,t,r){"use strict";var s=r("c65b"),a=r("7c73"),l=r("9112"),o=r("6964"),i=r("b622"),n=r("69f3"),u=r("dc4a"),c=r("ae93").IteratorPrototype,d=r("4754"),g=r("2a62"),m=i("toStringTag"),p="IteratorHelper",h="WrapForValidIterator",b=n.set,f=function(e){var t=n.getterFor(e?h:p);return o(a(c),{next:function(){var r=t(this);if(e)return r.nextHandler();if(r.done)return d(void 0,!0);try{var s=r.nextHandler();return r.returnHandlerResult?s:d(s,r.done)}catch(a){throw r.done=!0,a}},return:function(){var r=t(this),a=r.iterator;if(r.done=!0,e){var l=u(a,"return");return l?s(l,a):d(void 0,!0)}if(r.inner)try{g(r.inner.iterator,"normal")}catch(o){return g(a,"throw",o)}return a&&g(a,"normal"),d(void 0,!0)}})},C=f(!0),v=f(!1);l(v,m,"Iterator Helper"),e.exports=function(e,t,r){var s=function(s,a){a?(a.iterator=s.iterator,a.next=s.next):a=s,a.type=t?h:p,a.returnHandlerResult=!!r,a.nextHandler=e,a.counter=0,a.done=!1,b(this,a)};return s.prototype=t?C:v,s}},eedc:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"carousel-container"},[t("el-card",{staticClass:"card"},[t("div",{staticClass:"title"},[e._v("【轮播图管理】")]),t("div",{staticClass:"center"},[t("div",{staticClass:"search-bar"},[t("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入轮播图标题"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),t("el-button",{staticClass:"search-button",attrs:{type:"primary"},on:{click:e.searchCarousels}},[e._v("搜索")]),t("el-button",{staticClass:"search-button",attrs:{type:"success"},on:{click:e.showAddCarouselDialog}},[e._v("新增轮播图")])],1),t("el-table",{staticClass:"carousel-table",staticStyle:{width:"100%"},attrs:{data:e.carousels,stripe:""}},[t("el-table-column",{attrs:{prop:"title",label:"标题",sortable:""}}),t("el-table-column",{attrs:{label:"图片"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-image",{staticStyle:{width:"100px",height:"50px"},attrs:{src:r.row.imageUrl,fit:"cover","preview-src-list":[r.row.imageUrl]},on:{click:function(t){return e.showImageDialog(r.row.imageUrl)}}})]}}])}),t("el-table-column",{attrs:{prop:"order",label:"排序",sortable:""}}),t("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.editCarousel(r.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.confirmDeleteCarousel(r.row)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.totalCarousels},on:{"current-change":e.handlePageChange}})],1)]),t("el-dialog",{attrs:{title:"新增轮播图",visible:e.addCarouselDialogVisible},on:{"update:visible":function(t){e.addCarouselDialogVisible=t}}},[t("el-form",{ref:"newCarouselForm",attrs:{model:e.newCarousel,rules:e.rules,"label-position":"top"}},[t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{model:{value:e.newCarousel.title,callback:function(t){e.$set(e.newCarousel,"title",t)},expression:"newCarousel.title"}})],1),t("el-form-item",{attrs:{label:"图片",prop:"imageUrl"}},[t("el-input",{model:{value:e.newCarousel.imageUrl,callback:function(t){e.$set(e.newCarousel,"imageUrl",t)},expression:"newCarousel.imageUrl"}}),t("el-upload",{ref:"uploadImage",staticClass:"upload-demo",attrs:{action:e.uploadUrl,"before-upload":e.beforeUploadImage,"on-success":e.handleImageUploadSuccess,"show-file-list":!1}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1),t("el-form-item",{attrs:{label:"排序",prop:"order"}},[t("el-input-number",{attrs:{min:1},model:{value:e.newCarousel.order,callback:function(t){e.$set(e.newCarousel,"order",t)},expression:"newCarousel.order"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addCarouselDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("newCarouselForm")}}},[e._v("确定")])],1)],1),t("el-dialog",{attrs:{title:"编辑轮播图",visible:e.editCarouselDialogVisible},on:{"update:visible":function(t){e.editCarouselDialogVisible=t}}},[t("el-form",{ref:"editCarouselForm",attrs:{model:e.currentCarousel,rules:e.rules,"label-position":"top"}},[t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{model:{value:e.currentCarousel.title,callback:function(t){e.$set(e.currentCarousel,"title",t)},expression:"currentCarousel.title"}})],1),t("el-form-item",{attrs:{label:"图片",prop:"imageUrl"}},[t("el-input",{model:{value:e.currentCarousel.imageUrl,callback:function(t){e.$set(e.currentCarousel,"imageUrl",t)},expression:"currentCarousel.imageUrl"}}),t("el-upload",{ref:"uploadImage",staticClass:"upload-demo",attrs:{action:e.uploadUrl,"before-upload":e.beforeUploadImage,"on-success":e.handleImageUploadSuccess,"show-file-list":!1}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1),t("el-form-item",{attrs:{label:"排序",prop:"order"}},[t("el-input-number",{attrs:{min:1},model:{value:e.currentCarousel.order,callback:function(t){e.$set(e.currentCarousel,"order",t)},expression:"currentCarousel.order"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editCarouselDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitEditForm("editCarouselForm")}}},[e._v("确定")])],1)],1),t("el-dialog",{attrs:{title:"确认删除",visible:e.deleteCarouselDialogVisible},on:{"update:visible":function(t){e.deleteCarouselDialogVisible=t}}},[t("span",[e._v("你确定要删除这个轮播图吗？")]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.deleteCarouselDialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.deleteCarousel}},[e._v("确定")])],1)]),t("el-dialog",{attrs:{visible:e.imageDialogVisible,width:"30%"},on:{"update:visible":function(t){e.imageDialogVisible=t}}},[t("img",{staticStyle:{width:"100%"},attrs:{src:e.currentImage}})])],1)},a=[],l=(r("e9f5"),r("910d"),r("365c")),o=r("f121"),i={name:"Carousel",data(){return{searchQuery:"",carousels:[],currentPage:1,pageSize:10,totalCarousels:0,addCarouselDialogVisible:!1,editCarouselDialogVisible:!1,deleteCarouselDialogVisible:!1,newCarousel:{imageUrl:"",redirectUrl:"",isEnabled:!0,order:1},currentCarousel:{},carouselToDelete:null,rules:{title:[{required:!0,message:"请输入轮播图标题",trigger:"blur"}],imageUrl:[{required:!0,message:"请上传轮播图图片",trigger:"blur"}],order:[{required:!0,message:"请输入排序",trigger:"blur"}]},uploadUrl:"/api/v1/fileUpload/upload",imageDialogVisible:!1,currentImage:""}},mounted(){this.fetchCarousels()},methods:{async fetchCarousels(){try{const e=await Object(l["t"])();0===e.code?(this.carousels=e.data,this.totalCarousels=e.data.length):this.$message.error("获取轮播图列表失败: "+e.message)}catch(e){this.$message.error("获取轮播图列表失败: "+e.message)}},searchCarousels(){this.carousels=this.carousels.filter(e=>e.title.toLowerCase().includes(this.searchQuery.toLowerCase()))},handlePageChange(e){this.currentPage=e},showAddCarouselDialog(){this.addCarouselDialogVisible=!0},async addCarousel(){try{const e=await Object(l["c"])(this.newCarousel);0===e.code?(this.$message.success("新增轮播图成功"),this.addCarouselDialogVisible=!1,this.fetchCarousels()):this.$message.error("新增轮播图失败: "+e.message)}catch(e){this.$message.error("新增轮播图失败: "+e.message)}},editCarousel(e){this.currentCarousel={...e},this.editCarouselDialogVisible=!0},async submitEditForm(e){this.$refs[e].validate(async e=>{if(e)try{const e=await Object(l["y"])(this.currentCarousel);0===e.code?(this.$message.success("编辑轮播图成功"),this.editCarouselDialogVisible=!1,this.fetchCarousels()):this.$message.error("编辑轮播图失败: "+e.message)}catch(t){this.$message.error("编辑轮播图失败: "+t.message)}else this.$message.error("请填写完整的轮播图信息")})},confirmDeleteCarousel(e){this.carouselToDelete=e,this.deleteCarouselDialogVisible=!0},async deleteCarousel(){try{const e=await Object(l["g"])(this.carouselToDelete.id);0===e.code?(this.$message.success("删除轮播图成功"),this.deleteCarouselDialogVisible=!1,this.fetchCarousels()):this.$message.error("删除轮播图失败: "+e.message)}catch(e){this.$message.error("删除轮播图失败: "+e.message)}},submitForm(e){this.$refs[e].validate(e=>{e?this.addCarousel():this.$message.error("请填写完整的轮播图信息")})},handleImageUploadSuccess(e){if(0===e.code){const t=`${o["a"]}/v1/getLatestImage?fileName=${e.data}`;this.addCarouselDialogVisible?this.newCarousel.imageUrl=t:this.editCarouselDialogVisible&&(this.currentCarousel.imageUrl=t),this.$message.success("图片上传成功")}else 401===e.code?this.$message.error("登录超时，请重新登录"):this.$message.error("图片上传失败: "+e.message)},beforeUploadImage(e){const t=new FormData;return t.append("file",e),t.append("userId",window.localStorage.getItem("SET_NAME")),t.append("type","carousel"),this.uploadFile(t),!1},async uploadFile(e){try{const t=await Object(l["C"])(e);this.handleImageUploadSuccess(t)}catch(t){t.response&&401===t.response.status?this.$message.error("登录超时，请重新登录"):this.$message.error("图片上传失败: "+t.message)}},showImageDialog(e){this.currentImage=e,this.imageDialogVisible=!0}}},n=i,u=(r("3b0f"),r("2877")),c=Object(u["a"])(n,s,a,!1,null,"32b8a654",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-d16d0260.08e74e5d.js.map
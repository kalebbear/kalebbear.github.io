{"version":3,"sources":["webpack:///./src/views/admin/Info.vue?9248","webpack:///./src/views/admin/Info.vue","webpack:///src/views/admin/Info.vue","webpack:///./src/views/admin/Info.vue?0463","webpack:///./src/views/admin/Info.vue?9890"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","footerData","model","value","homeTitle","callback","$$v","$set","expression","homeDescription","phone","email","address","beianImage","ref","uploadUrl","beforeLogoUpload","handleLogoUploadSuccess","weChatImage","beforeUpload","handleUploadSuccess","icp","publicSecurity","copyright","on","saveFooterData","staticRenderFns","name","data","id","mounted","fetchFooterData","methods","response","getFooterData","code","length","console","error","message","updateFooterData","$message","success","status","baseUrl","file","formData","FormData","append","localStorage","getItem","uploadFile","service","post","uploadLogo","component"],"mappings":"kHAAA,W,oECAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,UAAU,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACJ,EAAIK,GAAG,cAAcH,EAAG,MAAM,CAACE,YAAY,WAAWF,EAAG,UAAU,CAACE,YAAY,cAAcE,MAAM,CAAC,MAAQN,EAAIO,WAAW,cAAc,UAAU,CAACL,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,WAAW,CAACM,MAAM,CAACC,MAAOT,EAAIO,WAAWG,UAAWC,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIO,WAAY,YAAaK,IAAME,WAAW,2BAA2B,GAAGZ,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,WAAW,CAACI,MAAM,CAAC,KAAO,WAAW,KAAO,GAAGE,MAAM,CAACC,MAAOT,EAAIO,WAAWQ,gBAAiBJ,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIO,WAAY,kBAAmBK,IAAME,WAAW,iCAAiC,GAAGZ,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,WAAW,CAACM,MAAM,CAACC,MAAOT,EAAIO,WAAWS,MAAOL,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIO,WAAY,QAASK,IAAME,WAAW,uBAAuB,GAAGZ,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,WAAW,CAACM,MAAM,CAACC,MAAOT,EAAIO,WAAWU,MAAON,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIO,WAAY,QAASK,IAAME,WAAW,uBAAuB,GAAGZ,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,WAAW,CAACM,MAAM,CAACC,MAAOT,EAAIO,WAAWW,QAASP,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIO,WAAY,UAAWK,IAAME,WAAW,yBAAyB,GAAGZ,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,WAAW,CAACJ,EAAG,WAAW,CAACM,MAAM,CAACC,MAAOT,EAAIO,WAAWY,WAAYR,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIO,WAAY,aAAcK,IAAME,WAAW,2BAA2BZ,EAAG,YAAY,CAACkB,IAAI,aAAahB,YAAY,cAAcE,MAAM,CAAC,OAASN,EAAIqB,UAAU,gBAAgBrB,EAAIsB,iBAAiB,aAAatB,EAAIuB,wBAAwB,kBAAiB,IAAQ,CAACrB,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,QAAQ,KAAO,YAAY,CAACN,EAAIK,GAAG,aAAa,IAAI,GAAGH,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,YAAY,CAACJ,EAAG,WAAW,CAACM,MAAM,CAACC,MAAOT,EAAIO,WAAWiB,YAAab,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIO,WAAY,cAAeK,IAAME,WAAW,4BAA4BZ,EAAG,YAAY,CAACkB,IAAI,SAAShB,YAAY,cAAcE,MAAM,CAAC,OAASN,EAAIqB,UAAU,gBAAgBrB,EAAIyB,aAAa,aAAazB,EAAI0B,oBAAoB,kBAAiB,IAAQ,CAACxB,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,QAAQ,KAAO,YAAY,CAACN,EAAIK,GAAG,WAAW,IAAI,GAAGH,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,QAAQ,CAACJ,EAAG,WAAW,CAACM,MAAM,CAACC,MAAOT,EAAIO,WAAWoB,IAAKhB,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIO,WAAY,MAAOK,IAAME,WAAW,qBAAqB,GAAGZ,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,WAAW,CAACM,MAAM,CAACC,MAAOT,EAAIO,WAAWqB,eAAgBjB,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIO,WAAY,iBAAkBK,IAAME,WAAW,gCAAgC,GAAGZ,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,WAAW,CAACM,MAAM,CAACC,MAAOT,EAAIO,WAAWsB,UAAWlB,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIO,WAAY,YAAaK,IAAME,WAAW,2BAA2B,GAAGZ,EAAG,eAAe,CAACA,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,WAAWwB,GAAG,CAAC,MAAQ9B,EAAI+B,iBAAiB,CAAC/B,EAAIK,GAAG,SAAS,IAAI,IAAI,IAAI,IAEnhG2B,EAAkB,G,wBCyDP,GACfC,KAAA,OACAC,OACA,OACA3B,WAAA,CACA4B,GAAA,EACAnB,MAAA,GACAC,MAAA,GACAC,QAAA,GACAM,YAAA,GACAL,WAAA,GACAQ,IAAA,GACAC,eAAA,GACAC,UAAA,GACAnB,UAAA,GACAK,gBAAA,IAEAM,UAAA,0BAGAe,UACA,KAAAC,mBAEAC,QAAA,CACA,wBACA,IACA,MAAAC,QAAAC,iBACA,IAAAD,EAAAE,MAAAF,EAAAL,KAAAQ,OAAA,EACA,KAAAnC,WAAAgC,EAAAL,KAAA,GAEAS,QAAAC,MAAA,+BAAAL,EAAAM,SAEA,MAAAD,GACAD,QAAAC,MAAA,+BAAAA,KAGA,uBACA,IACA,MAAAL,QAAAO,eAAA,KAAAvC,YACA,IAAAgC,EAAAE,KACA,KAAAM,SAAAC,QAAA,QAEA,KAAAD,SAAAH,MAAA,SAAAL,EAAAM,SAEA,MAAAD,GAEA,MAAAA,EAAAL,SAAAU,OACA,KAAAF,SAAAH,MAAA,cAEA,KAAAG,SAAAH,MAAA,SAAAA,KAIAlB,oBAAAa,GACA,IAAAA,EAAAE,MACA,KAAAlC,WAAAiB,YAAA,GAAA0B,qCAAAX,EAAAL,OACA,KAAAa,SAAAC,QAAA,WAGA,MAAAT,EAAAE,KACA,KAAAM,SAAAH,MAAA,cAEA,KAAAG,SAAAH,MAAA,WAAAL,EAAAM,UAIApB,aAAA0B,GAEA,MAAAC,EAAA,IAAAC,SAMA,OALAD,EAAAE,OAAA,OAAAH,GACAC,EAAAE,OAAA,SAAAC,aAAAC,QAAA,aAGA,KAAAC,WAAAL,IACA,GAEA,iBAAAA,GACA,IACA,MAAAb,QAAAmB,QAAAC,KAAA,KAAAtC,UAAA+B,GACA,KAAA1B,oBAAAa,GACA,MAAAK,GAEA,MAAAL,SAAAE,KACA,KAAAM,SAAAH,MAAA,cAEA,KAAAG,SAAAH,MAAA,WAAAL,SAAAM,WAIAtB,wBAAAgB,GACA,IAAAA,EAAAE,MACA,KAAAlC,WAAAY,WAAA,GAAA+B,qCAAAX,EAAAL,OACA,KAAAa,SAAAC,QAAA,aAEA,MAAAT,EAAAE,KACA,KAAAM,SAAAH,MAAA,cAEA,KAAAG,SAAAH,MAAA,aAAAL,EAAAM,UAIAvB,iBAAA6B,GACA,MAAAC,EAAA,IAAAC,SAIA,OAHAD,EAAAE,OAAA,OAAAH,GACAC,EAAAE,OAAA,SAAAC,aAAAC,QAAA,aACA,KAAAI,WAAAR,IACA,GAEA,iBAAAA,GACA,IACA,MAAAb,QAAAmB,QAAAC,KAAA,KAAAtC,UAAA+B,GACA,KAAA7B,wBAAAgB,GACA,MAAAK,GACAA,EAAAL,UAAA,MAAAK,EAAAL,SAAAU,OACA,KAAAF,SAAAH,MAAA,cAEA,KAAAG,SAAAH,MAAA,aAAAA,EAAAC,aC/K4V,I,wBCQxVgB,EAAY,eACd,EACA9D,EACAiC,GACA,EACA,KACA,WACA,MAIa,aAAA6B,E","file":"js/chunk-980f04de.8d7962ff.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Info.vue?vue&type=style&index=0&id=def5fa70&prod&lang=less&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"info-container\"},[_c('el-card',{staticClass:\"card\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"【基础信息配置】\")]),_c('div',{staticClass:\"center\"}),_c('el-form',{staticClass:\"input-width\",attrs:{\"model\":_vm.footerData,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"首页标题\"}},[_c('el-input',{model:{value:(_vm.footerData.homeTitle),callback:function ($$v) {_vm.$set(_vm.footerData, \"homeTitle\", $$v)},expression:\"footerData.homeTitle\"}})],1),_c('el-form-item',{attrs:{\"label\":\"首页描述\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":3},model:{value:(_vm.footerData.homeDescription),callback:function ($$v) {_vm.$set(_vm.footerData, \"homeDescription\", $$v)},expression:\"footerData.homeDescription\"}})],1),_c('el-form-item',{attrs:{\"label\":\"电话\"}},[_c('el-input',{model:{value:(_vm.footerData.phone),callback:function ($$v) {_vm.$set(_vm.footerData, \"phone\", $$v)},expression:\"footerData.phone\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\"}},[_c('el-input',{model:{value:(_vm.footerData.email),callback:function ($$v) {_vm.$set(_vm.footerData, \"email\", $$v)},expression:\"footerData.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"地址\"}},[_c('el-input',{model:{value:(_vm.footerData.address),callback:function ($$v) {_vm.$set(_vm.footerData, \"address\", $$v)},expression:\"footerData.address\"}})],1),_c('el-form-item',{attrs:{\"label\":\"网站logo\"}},[_c('el-input',{model:{value:(_vm.footerData.beianImage),callback:function ($$v) {_vm.$set(_vm.footerData, \"beianImage\", $$v)},expression:\"footerData.beianImage\"}}),_c('el-upload',{ref:\"logoUpload\",staticClass:\"upload-demo\",attrs:{\"action\":_vm.uploadUrl,\"before-upload\":_vm.beforeLogoUpload,\"on-success\":_vm.handleLogoUploadSuccess,\"show-file-list\":false}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"上传logo\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"微信客服二维码\"}},[_c('el-input',{model:{value:(_vm.footerData.weChatImage),callback:function ($$v) {_vm.$set(_vm.footerData, \"weChatImage\", $$v)},expression:\"footerData.weChatImage\"}}),_c('el-upload',{ref:\"upload\",staticClass:\"upload-demo\",attrs:{\"action\":_vm.uploadUrl,\"before-upload\":_vm.beforeUpload,\"on-success\":_vm.handleUploadSuccess,\"show-file-list\":false}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"上传图片\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"ICP\"}},[_c('el-input',{model:{value:(_vm.footerData.icp),callback:function ($$v) {_vm.$set(_vm.footerData, \"icp\", $$v)},expression:\"footerData.icp\"}})],1),_c('el-form-item',{attrs:{\"label\":\"公安信息\"}},[_c('el-input',{model:{value:(_vm.footerData.publicSecurity),callback:function ($$v) {_vm.$set(_vm.footerData, \"publicSecurity\", $$v)},expression:\"footerData.publicSecurity\"}})],1),_c('el-form-item',{attrs:{\"label\":\"版权\"}},[_c('el-input',{model:{value:(_vm.footerData.copyright),callback:function ($$v) {_vm.$set(_vm.footerData, \"copyright\", $$v)},expression:\"footerData.copyright\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveFooterData}},[_vm._v(\"保存\")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"info-container\">\n        <el-card class=\"card\">\n            <div class=\"title\">【基础信息配置】</div>\n            <div class=\"center\">\n                <!-- <img src=\"@/assets/avatar.png\" width=\"100px\" height=\"100px\" alt=\"\"> -->\n            </div>\n            <el-form :model=\"footerData\" label-width=\"120px\" class=\"input-width\">\n                <el-form-item label=\"首页标题\">\n                    <el-input v-model=\"footerData.homeTitle\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"首页描述\">\n                    <el-input v-model=\"footerData.homeDescription\" type=\"textarea\" :rows=\"3\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"电话\">\n                    <el-input v-model=\"footerData.phone\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"邮箱\">\n                    <el-input v-model=\"footerData.email\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"地址\">\n                    <el-input v-model=\"footerData.address\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"网站logo\">\n                    <el-input v-model=\"footerData.beianImage\"></el-input>\n                    <el-upload ref=\"logoUpload\" class=\"upload-demo\" :action=\"uploadUrl\" :before-upload=\"beforeLogoUpload\"\n                        :on-success=\"handleLogoUploadSuccess\" :show-file-list=\"false\">\n                        <el-button size=\"small\" type=\"primary\">上传logo</el-button>\n                    </el-upload>\n                </el-form-item>\n                <el-form-item label=\"微信客服二维码\">\n                    <el-input v-model=\"footerData.weChatImage\"></el-input>\n                    <el-upload ref=\"upload\" class=\"upload-demo\" :action=\"uploadUrl\" :before-upload=\"beforeUpload\"\n                        :on-success=\"handleUploadSuccess\" :show-file-list=\"false\">\n                        <el-button size=\"small\" type=\"primary\">上传图片</el-button>\n                    </el-upload>\n                </el-form-item>\n                <el-form-item label=\"ICP\">\n                    <el-input v-model=\"footerData.icp\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"公安信息\">\n                    <el-input v-model=\"footerData.publicSecurity\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"版权\">\n                    <el-input v-model=\"footerData.copyright\"></el-input>\n                </el-form-item>\n                <el-form-item>\n                    <el-button type=\"primary\" @click=\"saveFooterData\">保存</el-button>\n                </el-form-item>\n            </el-form>\n        </el-card>\n    </div>\n</template>\n\n<script>\n// import service from '@/utils/request' // 导入封装好的 axios 实例\nimport { getFooterData, updateFooterData } from '@/api/index'\nimport { baseUrl } from '@/config/index'\n\nexport default {\n    name: 'Info',\n    data() {\n        return {\n            footerData: {\n                id: 1,\n                phone: '',\n                email: '',\n                address: '',\n                weChatImage: '',\n                beianImage: '',\n                icp: '',\n                publicSecurity: '',\n                copyright: '' ,\n                homeTitle: '', // 新增字段\n                homeDescription: '' // 新增字段\n            },\n            uploadUrl: '/v1/fileUpload/upload' // 修改为相对路径\n        };\n    },\n    mounted() {\n        this.fetchFooterData();\n    },\n    methods: {\n        async fetchFooterData() {\n            try {\n                const response = await getFooterData();\n                if (response.code === 0 && response.data.length > 0) {\n                    this.footerData = response.data[0];\n                } else {\n                    console.error('Failed to fetch footer data:', response.message);\n                }\n            } catch (error) {\n                console.error('Failed to fetch footer data:', error);\n            }\n        },\n        async saveFooterData() {\n            try {\n                const response = await updateFooterData(this.footerData);\n                if (response.code === 0) {\n                    this.$message.success('保存成功');\n                } else {\n                    this.$message.error('保存失败: ' + response.message);\n                }\n            } catch (error) {\n                // 判断是否是登录超时\n                if (error.response.status === 401) {\n                    this.$message.error('登录超时，请重新登录');\n                } else {\n                    this.$message.error('保存失败: ' + error);\n                }\n            }\n        },\n        handleUploadSuccess(response) {\n            if (response.code === 0) {\n                this.footerData.weChatImage = `${baseUrl}/v1/getLatestImage?fileName=${response.data}`;\n                this.$message.success('图片上传成功');\n            } else {\n                // 判断是否是登录超时\n                if (response.code === 401) {\n                    this.$message.error('登录超时，请重新登录');\n                } else {\n                    this.$message.error('图片上传失败: ' + response.message);\n                }\n            }\n        },\n        beforeUpload(file) {\n            // 动态添加 userId 到 form-data\n            const formData = new FormData();\n            formData.append('file', file);\n            formData.append('userId', localStorage.getItem('SET_NAME'));\n\n            // 手动上传文件\n            this.uploadFile(formData);\n            return false; // 阻止 el-upload 的默认上传行为\n        },\n        async uploadFile(formData) {\n            try {\n                const response = await service.post(this.uploadUrl, formData);\n                this.handleUploadSuccess(response);\n            } catch (error) {\n                // 判断是否是登录超时\n                if (response.code === 401) {\n                    this.$message.error('登录超时，请重新登录');\n                } else {\n                    this.$message.error('图片上传失败: ' + response.message);\n                }\n            }\n        },\n        handleLogoUploadSuccess(response) {\n            if (response.code === 0) {\n                this.footerData.beianImage = `${baseUrl}/v1/getLatestImage?fileName=${response.data}`;\n                this.$message.success('Logo上传成功');\n            } else {\n                if (response.code === 401) {\n                    this.$message.error('登录超时，请重新登录');\n                } else {\n                    this.$message.error('Logo上传失败: ' + response.message);\n                }\n            }\n        },\n        beforeLogoUpload(file) {\n            const formData = new FormData();\n            formData.append('file', file);\n            formData.append('userId', localStorage.getItem('SET_NAME'));\n            this.uploadLogo(formData);\n            return false;\n        },\n        async uploadLogo(formData) {\n            try {\n                const response = await service.post(this.uploadUrl, formData);\n                this.handleLogoUploadSuccess(response);\n            } catch (error) {\n                if (error.response && error.response.status === 401) {\n                    this.$message.error('登录超时，请重新登录');\n                } else {\n                    this.$message.error('Logo上传失败: ' + error.message);\n                }\n            }\n        }\n    }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.info-container {\n    padding: 20px;\n}\n\n.card {\n    min-height: 500px;\n}\n\n.title {\n    font-size: 20px;\n    font-weight: bold;\n    margin-bottom: 20px;\n}\n\n.center {\n    display: flex;\n    justify-content: center;\n}\n\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Info.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Info.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Info.vue?vue&type=template&id=def5fa70&scoped=true\"\nimport script from \"./Info.vue?vue&type=script&lang=js\"\nexport * from \"./Info.vue?vue&type=script&lang=js\"\nimport style0 from \"./Info.vue?vue&type=style&index=0&id=def5fa70&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"def5fa70\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}